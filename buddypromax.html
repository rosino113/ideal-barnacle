<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>FocusBuddy</title>
<style>
  body,html{
    margin:0; padding:0; width:100%; height:100%; 
    font-family: "Helvetica Neue", sans-serif, "Microsoft Yahei";
  }
  *{box-sizing:border-box;}

  .hidden {
    display:none !important;
  }

  /* å¯çˆ±çš„åŸºç¡€è‰²è°ƒ */
  body {
    background: linear-gradient(135deg, #ffe7f9 0%, #e7f9ff 100%);
    color: #444;
  }

  button {
    background: #ffdce7;
    border: none;
    padding: 10px 20px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: bold;
    margin:5px;
    transition: all 0.3s;
    font-size:14px;
  }
  button:hover {
    background: #ffcce0;
  }

  /* æ ‡é¢˜å’Œè¯´æ˜åŠ ä¸Šå¯çˆ±ç¬¦å· */
  .main-page,
  .sub-page {
    display:flex; 
    flex-direction:column; 
    align-items:center; 
    justify-content:flex-start;
    padding:20px;
  }

  .main-page {
    justify-content:center;
    text-align:center;
  }

  .main-title {
    font-size: 2.5em;
    font-weight:bold;
    margin-bottom:20px;
    color:#333;
    font-family: "Microsoft YaHei", sans-serif;
    /* åŠ ä¸€äº›å¯çˆ±ç¬¦å· */
    position: relative;
  }
  .main-title:before,
  .main-title:after {
    content: "ËšË–ï¸*:.ï½¡Â°â‘….â˜…Ë–Ëš";
    font-size: 0.5em;
    color:#f6a;
    position:absolute;
  }
  .main-title:before {
    top:-20px;left:-40px;
  }
  .main-title:after {
    bottom:-20px;right:-40px;
  }

  .main-desc {
    font-size:1em;
    color:#666;
    margin-bottom:30px;
  }

  .nav-bar {
    width:100%;
    display:flex;
    justify-content:flex-start;
  }

  .nav-bar button {
    margin-left:0;
  }

  .section-title {
    font-size:1.5em;
    margin-top:0;
    color:#444;
    text-align:center;
    position:relative;
    padding:10px;
  }
  .section-title:after {
    content:"ËšË–ï¸*:.ï½¡Â°â‘….â˜…Ë–Ëš";
    position:absolute;
    font-size:0.5em;
    color:#f6a;
    bottom:-10px;left:50%;transform:translateX(-50%);
  }

  .task-list {
    list-style:none;
    padding:0;
    margin:10px 0;
    width:100%;
    max-width:500px;
  }
  .task-list li {
    background:#fff;
    margin:5px 0;
    padding:8px;
    border-radius:10px;
    border:1px solid #ccc;
    display:flex; align-items:center; justify-content:space-between;
    font-size:14px;
  }
  .task-list li.completed {
    text-decoration: line-through;
    color:#aaa;
  }

  .mouse-area {
    position:relative;
    margin-top:20px;
    text-align:center;
    padding:20px;
    border-radius:20px;
    background:#fff3f5;
    box-shadow:0 0 10px rgba(0,0,0,0.1);
  }
  .hamster-img {
    font-size:50px; /* ç”¨å¤§å­—ä½“æ˜¾ç¤ºemoji */
    display:block;
  }
  .speech-bubble {
    position:absolute;
    top:0; left:50%;
    transform:translate(-50%, -110%);
    background:#fff;
    padding:10px;
    border-radius:10px;
    border:2px solid #ffdca7;
    box-shadow:0 0 5px rgba(0,0,0,0.1);
    max-width:200px;
    font-size:14px;
    color:#333;
    text-align:center;
  }
  .speech-bubble:after {
    content:'';
    position:absolute;
    bottom:-10px; left:50%;
    transform:translateX(-50%);
    border:10px solid transparent;
    border-top-color:#fff;
  }

  /* æ¨¡æ€æ¡† */
  .modal-overlay {
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.3);
    display:flex;justify-content:center;align-items:center;
    z-index:9999;
  }
  .modal {
    background:#fff;
    padding:20px;
    border-radius:20px;
    text-align:center;
    width:300px;
    position:relative;
    box-shadow:0 0 10px rgba(0,0,0,0.1);
  }
  .modal h3 {
    margin-top:0;
  }
  .close-btn {
    position:absolute;
    top:10px; right:10px;
    background:none;
    border:none;
    font-size:20px;
    cursor:pointer;
  }

  .mood-form {
    background:#ffffffcc;
    padding:20px;
    border-radius:20px;
    box-shadow:0 0 5px rgba(0,0,0,0.1);
    margin-bottom:20px;
    width:100%;
    max-width:500px;
  }

  .mood-response {
    background:#fff;
    padding:10px;
    border-radius:10px;
    border:1px solid #ccc;
    max-width:500px;
    width:100%;
    margin-top:10px;
    font-size:14px;
  }

  .gift-bag {
    background:#ffffffcc;
    padding:20px;
    border-radius:20px;
    box-shadow:0 0 5px rgba(0,0,0,0.1);
    width:100%;
    max-width:500px;
    text-align:left;
  }
  .gift-bag ul {
    list-style:none;
    padding:0;
  }
  .gift-bag li {
    background:#fff;
    margin:5px 0;
    padding:8px;
    border-radius:10px;
    border:1px solid #ccc;
    font-size:14px;
  }

</style>
</head>
<body>
<!-- ä¸»é¡µé¢ -->
<div class="main-page" id="mainPage">
  <div class="main-title">FocusBuddy </div>
  <div class="main-desc">å’Œå¯çˆ±çš„å°é¼ ä¸€èµ·è§„åˆ’ä½ çš„ä¸€å¤© (à¸…>Ï‰<*à¸…)ï½</div>
  <button id="goTaskPageBtn"> å°é¼ é™ªä¼´</button>
  <button id="goMoodPageBtn">ğŸ’­ ï¸æ”¶å¬äººç±»å¿ƒäº‹</button>
  <button id="goBagPageBtn"> èƒŒåŒ…</button>
</div>

<!-- å°é¼ é™ªä¼´é¡µé¢ -->
<div class="sub-page hidden" id="taskPage">
  <div class="nav-bar"><button id="backToMainFromTask">â† è¿”å›ä¸»é¡µ</button></div>
  <h2 class="section-title"> å°é¼ é™ªä¼´</h2>
  <div style="text-align:center;">
    <h3>æ·»åŠ ä»»åŠ¡ (à¸‡ â€¢Ì€_â€¢Ì)à¸‡ åŠ æ²¹ï¼</h3>
    <input type="text" id="taskInput" placeholder="è¾“å…¥ä½ çš„ä»»åŠ¡â€¦" style="width:60%;font-size:14px;padding:5px;"/>
    <input type="text" id="taskTimer" placeholder="é¢„è®¡å®Œæˆæ—¶é—´(å¤‡æ³¨)" style="width:30%;font-size:14px;padding:5px;"/>
    <button id="addTaskBtn">æ·»åŠ ä»»åŠ¡</button>
  </div>
  
  <ul class="task-list" id="taskList"></ul>
  
  <div class="mouse-area" id="mouseArea">
    <div class="hamster-img"></div>
    <div class="speech-bubble" id="mouseMessage">å±å±ï¼Ÿ</div>
  </div>
  
  <div style="margin-top:20px;text-align:center;">
    <h3>æ™šå®‰æ€»ç»“ âœ§(à¹‘â€¢Ì€ã…â€¢Ìà¹‘)âœ§</h3>
    <button id="summaryBtn">æŸ¥çœ‹ä»Šå¤©æ€»ç»“</button>
    <div id="summaryMessage" style="margin-top:10px;color:#333;"></div>
  </div>
</div>

<!-- äººç±»å¿ƒäº‹é¡µé¢ -->
<div class="sub-page hidden" id="moodPage">
  <div class="nav-bar"><button id="backToMainFromMood">â† è¿”å›ä¸»é¡µ</button></div>
  <h2 class="section-title">ğŸ’­ ï¸æ”¶å¬äººç±»å¿ƒäº‹</h2>
  <div class="mood-form">
    <input type="text" id="moodInput" placeholder="è¾“å…¥ä½ çš„å¿ƒäº‹â€¦" style="width:60%;font-size:14px;padding:5px;"/>
    <select id="moodSelect" style="font-size:14px;padding:5px;">
      <option value="å¼€å¿ƒ">å¼€å¿ƒ</option>
      <option value="ä¼¤å¿ƒ">ä¼¤å¿ƒ</option>
      <option value="æ„¤æ€’">æ„¤æ€’</option>
      <option value="å¹³é™">å¹³é™</option>
      <option value="çƒ¦èº">çƒ¦èº</option>
    </select>
    <button id="submitMoodBtn">å€¾è¯‰ (ï½¡â€¢á´—-)_âœ¿</button>
  </div>
  <div class="mood-response" id="moodResponse" style="display:none;"></div>
</div>

<!-- èƒŒåŒ…é¡µé¢ -->
<div class="sub-page hidden" id="bagPage">
  <div class="nav-bar"><button id="backToMainFromBag">â† è¿”å›ä¸»é¡µ</button></div>
  <h2 class="section-title"> èƒŒåŒ…</h2>
  <div class="gift-bag" id="giftBag">
    <strong>èƒŒåŒ…ä¸­çš„ç¤¼ç‰©ï¼š</strong>
    <ul id="giftList"></ul>
    <div id="noGiftMsg">æš‚æ—¶è¿˜æ²¡æœ‰ç¤¼ç‰©å“¦ï½(>Ï‰<)</div>
  </div>
</div>

<!-- å¼¹çª—ï¼šåˆå§‹å°±æ·»åŠ hiddenç±» -->
<div class="modal-overlay hidden" id="modalOverlay">
  <div class="modal">
    <button class="close-btn" id="closeModalBtn">Ã—</button>
    <h3>ä»»åŠ¡è¿›è¡Œä¸­... ( â€¢Ì€ Ï‰ â€¢Ì )âœ§</h3>
    <div id="expectedTimeTxt">è¯·é€‰æ‹©ä½ çš„æ“ä½œï¼š</div>
    <div style="margin-top:10px;">
      <button id="taskCompleteBtn">å®Œæˆå•¦ï¼âœ§(ËŠá—œË‹*)âœ§</button>
      <button id="taskGiveUpBtn">æ”¾å¼ƒå§â€¦(ï¼›Â´Ğ´ï½€)ã‚</button>
    </div>
  </div>
</div>

<script>
// é¡µé¢åˆ‡æ¢é€»è¾‘
const mainPage = document.getElementById('mainPage');
const taskPage = document.getElementById('taskPage');
const moodPage = document.getElementById('moodPage');
const bagPage = document.getElementById('bagPage');

document.getElementById('goTaskPageBtn').addEventListener('click', ()=>{
  showPage(taskPage);
});
document.getElementById('goMoodPageBtn').addEventListener('click', ()=>{
  showPage(moodPage);
});
document.getElementById('goBagPageBtn').addEventListener('click', ()=>{
  showPage(bagPage);
});

document.getElementById('backToMainFromTask').addEventListener('click', ()=>{showPage(mainPage)});
document.getElementById('backToMainFromMood').addEventListener('click', ()=>{showPage(mainPage)});
document.getElementById('backToMainFromBag').addEventListener('click', ()=>{showPage(mainPage)});

function showPage(page){
  mainPage.classList.add('hidden');
  taskPage.classList.add('hidden');
  moodPage.classList.add('hidden');
  bagPage.classList.add('hidden');
  page.classList.remove('hidden');
}

// å…¨å±€å˜é‡
let tasks = []; // {text:'', completed:false, time:''}
let gifts = [];
let currentTaskIndex = null; 

// DOMå…ƒç´ 
const taskInput = document.getElementById('taskInput');
const taskTimer = document.getElementById('taskTimer');
const addTaskBtn = document.getElementById('addTaskBtn');
const taskList = document.getElementById('taskList');
const mouseMessage = document.getElementById('mouseMessage');
const summaryBtn = document.getElementById('summaryBtn');
const summaryMessage = document.getElementById('summaryMessage');

const giftList = document.getElementById('giftList');
const noGiftMsg = document.getElementById('noGiftMsg');

const modalOverlay = document.getElementById('modalOverlay');
const closeModalBtn = document.getElementById('closeModalBtn');
const taskCompleteBtn = document.getElementById('taskCompleteBtn');
const taskGiveUpBtn = document.getElementById('taskGiveUpBtn');
const expectedTimeTxt = document.getElementById('expectedTimeTxt');

const moodInput = document.getElementById('moodInput');
const moodSelect = document.getElementById('moodSelect');
const submitMoodBtn = document.getElementById('submitMoodBtn');
const moodResponse = document.getElementById('moodResponse');

// å¯¹è¯æ± 
const addTaskResponses = [
  "å±å±ï¼ä»»åŠ¡æ”¶åˆ°å•¦ï¼Œæˆ‘ä¼šå¸®ä½ è®°åœ¨å°ä»“åº“é‡Œï¼(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§",
  "åŠ æ²¹äººç±»ï¼æˆ‘åœ¨å°ä»“åº“ç­‰ä½ çš„å¥½æ¶ˆæ¯å“¦ï¼ãƒ¾(â‰§â–½â‰¦*)o",
  "ä»Šå¤©çš„å®‰æ’éƒ½æ”¾å¥½å•¦ï½è®°å¾—æ¥æ£€æŸ¥å“¦ï¼(â‰§âˆ€â‰¦)ã‚"
];
const completeTaskResponses = [
  "ä»»åŠ¡å®Œæˆï¼æœ¬é¼ ç»™ä½ ä¸€ä¸ªå¤§å¤§çš„æŠ±æŠ±ï¼(*â‰§Ï‰â‰¦)",
  "å¤ªæ£’å•¦ï¼ä½ å°±æ˜¯æœ€å‰å®³çš„äººç±»è„‘è¢‹ï¼ç»™ä½ ä¸€é¢—å°é¼ çˆ±å¿ƒï½ğŸ’•",
  "å’”åš“å’”åš“ï¼åƒæˆ‘å•ƒåšæœä¸€æ ·ï¼Œä»»åŠ¡è¢«ä½ è½»æ¾å•ƒæ‰å•¦ï¼Ù©(à¹‘â€¢Ì€Ï‰â€¢Ìà¹‘)Û¶"
];
const clickMouseResponses = [
  "å†å•ƒä¸€å£ï¼ä»»åŠ¡å¿«å®Œæˆå•¦ï¼(à¸‡ â€¢Ì€_â€¢Ì)à¸‡",
  "å±å±ï½æ…¢æ…¢æ¥ï¼Œé¼ é¼ é™ªç€ä½ ï¼(â—Â´âˆ€ï½€â—)",
  "åˆ«æ‘¸æˆ‘ï½å¿«ä¸“å¿ƒå·¥ä½œå•¦ï¼(>ï¹<)",
  "å±ï¼Ÿä»»åŠ¡è¿˜åœ¨é‚£å„¿ç­‰ç€å‘¢ï¼Œè¦ä¸è¦ä¸€èµ·åŠªåŠ›å•ƒå•ƒçœ‹ï¼Ÿo(*â‰§â–½â‰¦)ãƒ„",
  "(*Â´âˆ€`)æ¯”å¿ƒï½"
];
const failedTaskResponses = [
  "å±ï¼Ÿå¥½åƒæ²¡å®Œæˆâ€¦åˆ«æ°”é¦ï¼Œè¿˜æœ‰æœºä¼šï¼( â€¢Ì€ Ï‰ â€¢Ì )âœ§",
  "å±å±ï½è¦è®°å¾—çœ‹ä»»åŠ¡æ—¶é—´å•¦ï¼æ²¡å…³ç³»ï¼Œé¼ ç›¸ä¿¡ä½ ï¼Œä¸‹æ¬¡ä¸€å®šè¡Œï¼(>Ï‰<)"
];
const giveUpTaskResponses = [
  "ä»»åŠ¡å¯ä»¥æ”¾ä¸‹ï¼Œä½†äººç±»ä¸€å®šè¦å¥½å¥½ä¼‘æ¯ï¼(*Â´â–½`*)",
  "é¼ ç›¸ä¿¡ä½ å“Ÿï¼Œä¸‹æ¬¡å…ˆä»æœ€ç®€å•çš„é‚£ä¸€å—å•ƒèµ·å§ï¼Ù©(à¹‘â›á´—â›à¹‘)Û¶"
];
const summaryGoodResponses = [
  "ä»Šå¤©å®Œæˆäº†å¥½å¤šï¼é¼ éª„å‚²åœ°è½¬ä¸‰åœˆï½(ï¾‰>Ï‰<)ï¾‰",
  "å±å±ï¼ä½ æ˜¯é¼ å¿ƒä¸­çš„æ•ˆç‡ä¹‹ç‹ï¼( â€¢Ì€ Ï‰ â€¢Ì )y",
  "é¼ æ•°äº†æ•°ï¼Œä»Šå¤©ä½ å®Œæˆäº†å¥½å¤šå“¦ï¼å‰å®³ï½â˜†(ï¾Ÿâ–½ï¾Ÿ)"
];
const summaryBadResponses = [
  "ä»Šå¤©æœ‰ç‚¹ç´¯ï¼Ÿæ²¡äº‹ï¼Œæ˜å¤©ä¼šæ›´æ£’ï¼(à¹‘â€¢Ì€ã…â€¢Ìà¸…âœ§",
  "é¼ é¼ é™ªç€ä½ ï¼Œä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·åŠªåŠ›å§ï¼(o^ ^o)",
  "æ²¡å…³ç³»å•¦ï½é¼ é¼ ä¹Ÿæœ‰è—åšæœå¿˜è®°çš„æ—¶å€™ï¼æ˜å¤©ç»§ç»­åŠ æ²¹å§ï¼(à¸‡ â€¢Ì€_â€¢Ì)à¸‡"
];

const possibleGifts = [
  "ä¸€æœµå°èŠ±",
  "ä¸€é¢—å°åšæœğŸ¥œ",
  "ä¸€å¼ å¯çˆ±è´´çº¸",
  "ä¸€ç‰‡å°å¶å­",
  "ä¸€ç²’å°æ˜Ÿæ˜Ÿè£…é¥°â­"
];

// å¿ƒæƒ…å›åº”è¡¨
const moodResponsesObj = {
  "å¼€å¿ƒ": [
    "å±å±ï¼å¼€å¿ƒæ˜¯æœ€æ£’çš„èƒ½é‡ï¼Œä¿æŒä¸‹å»ï¼âœ§(ËŠá—œË‹*)âœ§",
    "äººå¼€å¿ƒé¼ ä¹Ÿå¼€å¿ƒï¼Œè·‘åœˆè·‘å¾—æ›´å¿«äº†ï¼(ï¾‰>Ï‰<)ï¾‰",
    "ç»™é¼ è®²è®²é‡åˆ°äº†ä»€ä¹ˆè¶£äº‹å§ï¼(â‰§âˆ€â‰¦)â™ª"
  ],
  "ä¼¤å¿ƒ":[
    "æŠ±æŠ±ï½é¼ é™ªä½ æ…¢æ…¢è°ƒæ•´æƒ…ç»ªã€‚(ã£Â´Ï‰`c)",
    "è¿™é¢—å°åšæœé€ç»™ä½ ï¼Œæ„¿å®ƒå¸¦æ¥ä¸€ç‚¹ç‚¹æ¸©æš–ã€‚(âœ¿â—¡â€¿â—¡)",
    "æ²¡å…³ç³»ï¼Œå“­å‡ºæ¥ä¹Ÿæ²¡äº‹ï¼Œè¿˜æœ‰é¼ åœ¨å‘¢ã€‚( â€¢Ì¥Ì Ë â€¢Ì€à¥‚ )"
  ],
  "æ„¤æ€’":[
    "å±å±ï¼å‘æ³„å‡ºæ¥å§ï¼Œæ·±å‘¼å¸è¯•è¯•çœ‹ï¼Ÿ(ï¿£ï¹ï¿£ï¼›)",
    "æ¥ï¼Œæˆ‘é™ªä½ ä¸€èµ·è·‘æ»šè½®è§£å‹ï¼(à¸‡ â€¢_â€¢)à¸‡",
    "è°æƒ¹ä½ ç”Ÿæ°”äº†ï¼Ÿé¼ ä¹Ÿè·Ÿä½ ä¸€èµ·ç”Ÿæ°”ï¼(â•¬â–”çš¿â–”)â•¯"
  ],
  "å¹³é™":[
    "å±ï½ä½ çš„å¹³é™æ„ŸæŸ“åˆ°é¼ äº†ã€‚( Ë˜Ï‰Ë˜ )",
    "æœ‰ä½ è¿™æ ·çš„ä¼™ä¼´ï¼Œé¼ è§‰å¾—å¾ˆå®‰å¿ƒã€‚(áƒ¦Ë˜âŒ£Ë˜áƒ¦)",
    "å¸Œæœ›è¿™ä»½å¹³é™èƒ½é™ªä¼´ä½ æ›´ä¹…ä¸€äº›ï¼(â—¡ Ï‰ â—¡)"
  ],
  "çƒ¦èº":[
    "è¯•è¯•æ·±å‘¼å¸ï¼Œé¼ å¸®ä½ æ•°æ•°ï¼Ÿ(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§",
    "å’”åš“å’”åš“ï¼Œä¸€ç‚¹ç‚¹æ¥ï¼Œä¼šå¥½èµ·æ¥çš„ï¼(â€¢Ì€á´—â€¢Ì)Ùˆ Ì‘Ì‘",
    "æ‰æ‰é¼ çš„è‚šå­ï¼Œå¿ƒæƒ…ä¼šä¸ä¼šå¥½ä¸€ç‚¹ï¼Ÿ(à¹‘â€¢Ğ·â€¢à¹‘)"
  ]
};

// æ·»åŠ ä»»åŠ¡äº‹ä»¶
addTaskBtn.addEventListener('click', ()=>{
  const text = taskInput.value.trim();
  const timeRemark = taskTimer.value.trim();

  if(!text){
    alert("å§å§ï½è¯·å…ˆè¾“å…¥ä»»åŠ¡å“¦ï¼(>_<)");
    return;
  }

  // æ·»åŠ ä»»åŠ¡è¿›åˆ—è¡¨
  tasks.push({text, completed:false, time:timeRemark});
  renderTasks();
  showMouseMessage(randomFromArray(addTaskResponses));
  taskInput.value = '';
  taskTimer.value = '';

  // æ·»åŠ ä»»åŠ¡åå†å¼¹å‡ºmodal
  currentTaskIndex = tasks.length - 1;
  showModal(timeRemark);
});

// æ˜¾ç¤ºmodalå‡½æ•°
function showModal(timeRemark){
  expectedTimeTxt.innerText = timeRemark ? `é¢„è®¡å®Œæˆæ—¶é—´ï¼š${timeRemark}\nè¯·é€‰æ‹©ä½ çš„æ“ä½œ:` : "è¯·é€‰æ‹©ä½ çš„æ“ä½œï¼š";
  modalOverlay.classList.remove('hidden');
}

// å®Œæˆ
taskCompleteBtn.addEventListener('click', ()=>{
  modalOverlay.classList.add('hidden');
  completeTask(currentTaskIndex);
});

// æ”¾å¼ƒ
taskGiveUpBtn.addEventListener('click', ()=>{
  modalOverlay.classList.add('hidden');
  giveUpTask(currentTaskIndex);
});

// å…³é—­(X)ä»£è¡¨è¶…æ—¶
closeModalBtn.addEventListener('click', ()=>{
  modalOverlay.classList.add('hidden');
  handleTimeout(currentTaskIndex);
});

function completeTask(index){
  if(index>=0 && index<tasks.length){
    tasks[index].completed = true;
    renderTasks();
    showMouseMessage(randomFromArray(completeTaskResponses));
  }
}

function giveUpTask(index){
  showMouseMessage(randomFromArray(giveUpTaskResponses));
}

function handleTimeout(index){
  showMouseMessage(randomFromArray(failedTaskResponses));
}

// æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨
function renderTasks(){
  taskList.innerHTML = '';
  tasks.forEach((t, i)=>{
    const li = document.createElement('li');
    li.className = t.completed?'completed':'';
    li.innerHTML = `
      <span>${t.text}${t.time?`(é¢„è®¡:${t.time})`:''}</span>
      <input type="checkbox" ${t.completed?'checked':''}/>
    `;
    li.querySelector('input').addEventListener('click',()=>{
      tasks[i].completed = !tasks[i].completed;
      if(tasks[i].completed){
        showMouseMessage(randomFromArray(completeTaskResponses));
      }
      renderTasks();
    });
    taskList.appendChild(li);
  });
}

// ç‚¹å‡»ä»“é¼ 
document.getElementById('mouseArea').addEventListener('click', ()=>{
  showMouseMessage(randomFromArray(clickMouseResponses));
});

// æ˜¾ç¤ºé¼ é¼ æ¶ˆæ¯
function showMouseMessage(msg){
  mouseMessage.innerText = msg;
}

// æ™šå®‰æ€»ç»“
summaryBtn.addEventListener('click', ()=>{
  let completedCount = tasks.filter(t=>t.completed).length;
  let notCompletedCount = tasks.length - completedCount;
  if(tasks.length === 0){
    summaryMessage.innerText = "ä»Šå¤©å¥½åƒæ²¡æœ‰ä»€ä¹ˆä»»åŠ¡è®°å½•å‘¢ï½(>ï¹<)";
    return;
  }
  let responsePool = completedCount > notCompletedCount ? summaryGoodResponses : summaryBadResponses;
  summaryMessage.innerText = randomFromArray(responsePool);

  // éšæœºé€ç¤¼ç‰©
  const gift = randomFromArray(possibleGifts);
  gifts.push(gift);
  refreshGiftBag();
});

// æ›´æ–°ç¤¼ç‰©è¢‹å±•ç¤º
function refreshGiftBag(){
  giftList.innerHTML = '';
  if(gifts.length===0){
    noGiftMsg.style.display='block';
  }else{
    noGiftMsg.style.display='none';
    gifts.forEach(g=>{
      let li = document.createElement('li');
      li.innerText = g;
      giftList.appendChild(li);
    });
  }
}

// å¿ƒäº‹å€¾è¯‰
submitMoodBtn.addEventListener('click', ()=>{
  const text = moodInput.value.trim();
  const mood = moodSelect.value;
  if(!text){
    alert("å§å§ï½å…ˆè¯´ç‚¹ä»€ä¹ˆå§ (à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§");
    return;
  }
  const res = randomFromArray(moodResponsesObj[mood]);
  moodResponse.style.display = 'block';
  moodResponse.innerText = res;
  moodInput.value = '';
});

// å·¥å…·å‡½æ•°
function randomFromArray(arr){
  return arr[Math.floor(Math.random()*arr.length)];
}

// åˆå§‹åŒ–
showPage(mainPage);
refreshGiftBag();
modalOverlay.classList.add('hidden');
</script>
</body>
</html>