<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>FocusBuddy</title>
<style>
  body,html{
    margin:0; padding:0; width:100%; height:100%; 
    font-family: "Helvetica Neue", "Microsoft Yahei", "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", sans-serif;
  }
  *{box-sizing:border-box;}

  .hidden {
    display:none !important;
  }

  body {
    background: linear-gradient(135deg, #ffe7f9 0%, #e7f9ff 100%);
    color: #444;
    font-size:16px;
    line-height:1.5;
  }

  button {
    background: #ffdce7;
    border: none;
    padding: 10px 20px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: bold;
    margin:10px 0;
    transition: all 0.3s;
    font-size:16px;
    display:inline-block;
  }
  button:hover {
    background: #ffcce0;
  }

  .main-page,
  .sub-page {
    display:flex; 
    flex-direction:column; 
    align-items:center; 
    justify-content:flex-start;
    padding:20px;
    min-height:100vh;
    box-sizing:border-box;
  }

  .main-page {
    justify-content:center;
    text-align:center;
  }

  .main-title {
    font-size: 2em;
    font-weight:bold;
    margin-bottom:20px;
    color:#333;
  }

  .main-desc {
    font-size:1em;
    color:#666;
    margin-bottom:30px;
    max-width:90%;
  }

  .nav-bar {
    width:100%;
    display:flex;
    justify-content:flex-start;
  }

  .nav-bar button {
    margin-left:0;
  }

  .section-title {
    font-size:1.5em;
    margin-top:0;
    color:#444;
    text-align:center;
    padding:10px 0;
  }

  .task-list {
    list-style:none;
    padding:0;
    margin:10px 0;
    width:100%;
    max-width:500px;
  }
  .task-list li {
    background:#fff;
    margin:5px 0;
    padding:8px;
    border-radius:10px;
    border:1px solid #ccc;
    display:flex; align-items:center; justify-content:space-between;
    font-size:14px;
  }
  .task-list li.completed {
    text-decoration: line-through;
    color:#aaa;
  }

  .mouse-area {
    position:relative;
    margin-top:20px;
    text-align:center;
    padding:20px;
    border-radius:20px;
    background:#fff3f5;
    box-shadow:0 0 10px rgba(0,0,0,0.1);
    width:100%;
    max-width:200px;
  }

  .hamster-img {
    font-size:50px; 
    display:block;
  }

  /* å°†å¯¹è¯æ¡†ç§»åŠ¨åˆ°å°é¼ å·¦ä¾§ */
  .speech-bubble {
    position:absolute;
    top:50%; 
    left:-10px;
    transform:translate(-100%,-50%);
    background:#fff;
    padding:10px;
    border-radius:10px;
    border:2px solid #ffdca7;
    box-shadow:0 0 5px rgba(0,0,0,0.1);
    max-width:120px;
    font-size:14px;
    color:#333;
    text-align:center;
    word-wrap:break-word;
  }
  .speech-bubble:after {
    content:'';
    position:absolute;
    top:50%; 
    right:-10px; 
    transform:translateY(-50%);
    border:10px solid transparent;
    border-left-color:#fff;
  }

  .mood-form {
    background:#ffffffcc;
    padding:20px;
    border-radius:20px;
    box-shadow:0 0 5px rgba(0,0,0,0.1);
    margin-bottom:20px;
    width:100%;
    max-width:500px;
  }

  .mood-response {
    background:#fff;
    padding:10px;
    border-radius:10px;
    border:1px solid #ccc;
    max-width:500px;
    width:100%;
    margin-top:10px;
    font-size:14px;
    word-break:break-word;
  }

  .gift-bag {
    background:#ffffffcc;
    padding:20px;
    border-radius:20px;
    box-shadow:0 0 5px rgba(0,0,0,0.1);
    width:100%;
    max-width:500px;
    text-align:left;
  }
  .gift-bag ul {
    list-style:none;
    padding:0;
  }
  .gift-bag li {
    background:#fff;
    margin:5px 0;
    padding:8px;
    border-radius:10px;
    border:1px solid #ccc;
    font-size:14px;
  }

  input[type="text"], select {
    padding:8px;
    font-size:14px;
    border-radius:10px;
    border:1px solid #ccc;
    margin:5px;
    width:90%;
    max-width:200px;
    box-sizing:border-box;
  }

  .modal-overlay {
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.3);
    display:flex;justify-content:center;align-items:center;
    z-index:9999;
  }
  .modal {
    background:#fff;
    padding:20px;
    border-radius:20px;
    text-align:center;
    width:80%;
    max-width:300px;
    position:relative;
    box-shadow:0 0 10px rgba(0,0,0,0.1);
  }
  .modal h3 {
    margin-top:0;
  }
  .close-btn {
    position:absolute;
    top:10px; right:10px;
    background:none;
    border:none;
    font-size:20px;
    cursor:pointer;
  }

</style>
</head>
<body>
<!-- ä¸»é¡µé¢ -->
<div class="main-page" id="mainPage">
  <div class="main-title">ğŸ€FocusBuddyğŸ€</div>
  <div class="main-desc">å’Œå¯çˆ±çš„å°é¼ ä¸€èµ·è§„åˆ’ä½ çš„ä¸€å¤©âœï¸</div>
  <button id="goTaskPageBtn">ğŸ¹å°é¼ é™ªä¼´</button>
  <button id="goMoodPageBtn">ï¸ğŸ“¬æ”¶å¬äººç±»å¿ƒäº‹</button>
  <button id="goBagPageBtn">ğŸ’èƒŒåŒ…</button>
  <p style="font-size:12px; color:#666; margin-top:20px;">ç”±æ¶¦ & ChatGPT åˆ¶ä½œ</p >
</div>

<!-- å°é¼ é™ªä¼´é¡µé¢ -->
<div class="sub-page hidden" id="taskPage">
  <div class="nav-bar"><button id="backToMainFromTask">â† è¿”å›ä¸»é¡µ</button></div>
  <h2 class="section-title">ğŸ¹å°é¼ é™ªä¼´</h2>
  <div style="text-align:center;">
    <h3>æ·»åŠ ä»»åŠ¡ğŸ“ŒåŠ æ²¹äººç±»ï¼</h3>
    <div>
      <input type="text" id="taskInput" placeholder="è¾“å…¥ä½ çš„ä»»åŠ¡â€¦" />
      <input type="text" id="taskTimer" placeholder="é¢„è®¡å®Œæˆæ—¶é—´(å¤‡æ³¨)"/>
    </div>
    <button id="addTaskBtn">æ·»åŠ ä»»åŠ¡</button>
  </div>
  
  <ul class="task-list" id="taskList"></ul>
  
  <div class="mouse-area" id="mouseArea">
    <div class="hamster-img">ğŸ¹</div>
    <div class="speech-bubble" id="mouseMessage">å±å±ï¼Ÿ</div>
  </div>
  
  <div style="margin-top:20px;text-align:center;">
    <h3>æ™šå®‰æ€»ç»“ğŸ’¤</h3>
    <button id="summaryBtn">æŸ¥çœ‹ä»Šå¤©æ€»ç»“</button>
    <div id="summaryMessage" style="margin-top:10px;color:#333;"></div>
  </div>
</div>

<!-- äººç±»å¿ƒäº‹é¡µé¢ -->
<div class="sub-page hidden" id="moodPage">
  <div class="nav-bar"><button id="backToMainFromMood">â† è¿”å›ä¸»é¡µ</button></div>
  <h2 class="section-title">ï¸ğŸ“¬æ”¶å¬äººç±»å¿ƒäº‹</h2>
  <div class="mood-form">
    <input type="text" id="moodInput" placeholder="è¾“å…¥ä½ çš„å¿ƒäº‹â€¦"/>
    <select id="moodSelect">
      <option value="å¼€å¿ƒ">å¼€å¿ƒ</option>
      <option value="ä¼¤å¿ƒ">ä¼¤å¿ƒ</option>
      <option value="æ„¤æ€’">æ„¤æ€’</option>
      <option value="å¹³é™">å¹³é™</option>
      <option value="çƒ¦èº">çƒ¦èº</option>
    </select>
    <button id="submitMoodBtn">å€¾è¯‰ğŸ’­</button>
  </div>
  <div class="mood-response" id="moodResponse" style="display:none;"></div>
</div>

<!-- èƒŒåŒ…é¡µé¢ -->
<div class="sub-page hidden" id="bagPage">
  <div class="nav-bar"><button id="backToMainFromBag">â† è¿”å›ä¸»é¡µ</button></div>
  <h2 class="section-title">ğŸ’èƒŒåŒ…</h2>
  <div class="gift-bag" id="giftBag">
    <strong>èƒŒåŒ…ä¸­çš„ç¤¼ç‰©ï¼š</strong>
    <ul id="giftList"></ul>
    <div id="noGiftMsg">æš‚æ—¶è¿˜æ²¡æœ‰æ”¶åˆ°å°é¼ çš„ç¤¼ç‰©å“¦ï½(>_<)</div>
  </div>
</div>

<!-- å¼¹çª—ï¼šåˆå§‹å°±æ·»åŠ hiddenç±» -->
<div class="modal-overlay hidden" id="modalOverlay">
  <div class="modal">
    <button class="close-btn" id="closeModalBtn">Ã—</button>
    <h3>ä»»åŠ¡è¿›è¡Œä¸­...ğŸ¹å±å±</h3>
    <div id="expectedTimeTxt">äººç±»å®Œæˆäº†å˜›ï¼š</div>
    <div style="margin-top:10px;">
      <button id="taskCompleteBtn">å®Œæˆå•¦ï¼ğŸ¥°</button>
      <button id="taskGiveUpBtn">æ”¾å¼ƒå§â€¦ğŸ˜£</button>
    </div>
  </div>
</div>

<script>
// é¡µé¢åˆ‡æ¢é€»è¾‘
const mainPage = document.getElementById('mainPage');
const taskPage = document.getElementById('taskPage');
const moodPage = document.getElementById('moodPage');
const bagPage = document.getElementById('bagPage');

document.getElementById('goTaskPageBtn').addEventListener('click', ()=>{
  showPage(taskPage);
});
document.getElementById('goMoodPageBtn').addEventListener('click', ()=>{
  showPage(moodPage);
});
document.getElementById('goBagPageBtn').addEventListener('click', ()=>{
  showPage(bagPage);
});

document.getElementById('backToMainFromTask').addEventListener('click', ()=>{showPage(mainPage)});
document.getElementById('backToMainFromMood').addEventListener('click', ()=>{showPage(mainPage)});
document.getElementById('backToMainFromBag').addEventListener('click', ()=>{showPage(mainPage)});

function showPage(page){
  mainPage.classList.add('hidden');
  taskPage.classList.add('hidden');
  moodPage.classList.add('hidden');
  bagPage.classList.add('hidden');
  page.classList.remove('hidden');
}

// å…¨å±€å˜é‡
let tasks = []; // {text:'', completed:false, time:''}
let gifts = [];
let currentTaskIndex = null; 

// DOMå…ƒç´ 
const taskInput = document.getElementById('taskInput');
const taskTimer = document.getElementById('taskTimer');
const addTaskBtn = document.getElementById('addTaskBtn');
const taskList = document.getElementById('taskList');
const mouseMessage = document.getElementById('mouseMessage');
const summaryBtn = document.getElementById('summaryBtn');
const summaryMessage = document.getElementById('summaryMessage');

const giftList = document.getElementById('giftList');
const noGiftMsg = document.getElementById('noGiftMsg');

const modalOverlay = document.getElementById('modalOverlay');
const closeModalBtn = document.getElementById('closeModalBtn');
const taskCompleteBtn = document.getElementById('taskCompleteBtn');
const taskGiveUpBtn = document.getElementById('taskGiveUpBtn');
const expectedTimeTxt = document.getElementById('expectedTimeTxt');

const moodInput = document.getElementById('moodInput');
const moodSelect = document.getElementById('moodSelect');
const submitMoodBtn = document.getElementById('submitMoodBtn');
const moodResponse = document.getElementById('moodResponse');

// å¯¹è¯æ± 
const addTaskResponses = [
  "å±å±ï¼ä»»åŠ¡æ”¶åˆ°å•¦ï¼(o^ ^o)",
  "åŠ æ²¹äººç±»ï¼æˆ‘åœ¨å°ä»“åº“ç­‰ä½ çš„å¥½æ¶ˆæ¯ï¼(â‰§âˆ€â‰¦)ã‚",
  "ä»Šå¤©çš„å®‰æ’å·²æ”¶ä¸‹ï½è®°å¾—æ¥æ£€æŸ¥å“¦ï¼(><)"
];
const completeTaskResponses = [
  "ä»»åŠ¡å®Œæˆï¼ç»™ä½ ä¸€ä¸ªå¤§å¤§çš„æŠ±æŠ±ï¼(>Ï‰<)",
  "å¤ªæ£’å•¦ï¼ä½ æœ€å‰å®³ï¼ç»™ä½ ä¸€é¢—çˆ±å¿ƒï½ğŸ’•",
  "åƒå•ƒåšæœä¸€æ ·ï¼Œä»»åŠ¡è¢«ä½ è½»æ¾å•ƒæ‰å•¦ï¼(à¸‡ â€¢Ì€_â€¢Ì)à¸‡"
];
const clickMouseResponses = [
  "å†å•ƒä¸€å£ï¼ä»»åŠ¡å¿«å®Œæˆå•¦ï¼(âœªÏ‰âœª)",
  "å±å±ï½æ…¢æ…¢æ¥ï¼Œé¼ é™ªç€ä½ (*à¹“Â´â•°â•¯`à¹“)",
  "åˆ«æ‘¸æˆ‘ï½å¿«ä¸“å¿ƒå·¥ä½œå•¦ï¼(><)",
  "ä»»åŠ¡è¿˜åœ¨é‚£å„¿ç­‰ç€å‘¢ï½åŠ æ²¹åŠ æ²¹ï¼o(Â´^ï½€)o",
  "(*Â´âˆ€`)æ¯”å¿ƒï½"
];
const failedTaskResponses = [
  "å±ï¼Ÿæ²¡å®Œæˆâ€¦åˆ«æ°”é¦ï¼Œè¿˜æœ‰æœºä¼šï¼",
  "ä¸‹æ¬¡ä¸€å®šè¡Œï¼è®°å¾—çœ‹æ—¶é—´å“¦ï¼(à¹‘Â´ã…‚`à¹‘) "
];
const giveUpTaskResponses = [
  "ä»»åŠ¡æ”¾ä¸‹ä¹Ÿæ²¡å…³ç³»ï¼Œå¥½å¥½ä¼‘æ¯ï¼â™¡",
  "ä¸‹æ¬¡å…ˆä»ç®€å•çš„å¼€å§‹å•ƒå§ï¼"
];
const summaryGoodResponses = [
  "ä»Šå¤©å®Œæˆå¥½å¤šï¼é¼ è½¬åœˆè¡¨ç¤ºå¼€å¿ƒï¼(ï½¡â—•Ë‡âˆ€Ë‡â—•)",
  "ä½ æ˜¯é¼ å¿ƒä¸­çš„æ•ˆç‡ä¹‹ç‹ï¼(..â€ºá´—â€¹..)",
  "å®Œæˆé‡å¥½å‰å®³ï¼Œè®©é¼ æƒ³ç»™ä½ çŒ®ä¸Šå°åšæœï¼(â™¡Â´ Â³`)"
];
const summaryBadResponses = [
  "ä»Šå¤©æœ‰ç‚¹ç´¯ï¼Ÿæ˜å¤©ä¼šæ›´æ£’ï¼",
  "é¼ é™ªç€ä½ ï¼Œä¸‹æ¬¡å†ä¸€èµ·åŠªåŠ›å§ï¼(=Â´â–½ï½€)ã‚  ",
  "æ²¡å…³ç³»ï¼Œæ˜å¤©ç»§ç»­åŠ æ²¹å§ï¼(ï½¡â€¢Ë‡â€¸Ë‡â€¢ï½¡)"
];

const possibleGifts = [
  "ä¸€æœµå°èŠ±ğŸŒº",
  "ä¸€é¢—å°åšæœğŸ¥œ",
  "ä¸€å¼ å¯çˆ±è´´çº¸âœ¨ï¸",
  "ä¸€ç‰‡å››å¶è‰ğŸ€",
  "ä¸€ç²’å°æ˜Ÿæ˜Ÿâ­"
];

const moodResponsesObj = {
  "å¼€å¿ƒ": [
    "å¼€å¿ƒæ˜¯æœ€æ£’çš„èƒ½é‡ï¼ç»§ç»­ä¿æŒï¼(â‰§âˆ€â‰¦)ã‚",
    "äººå¼€å¿ƒï¼Œé¼ ä¹Ÿå¼€å¿ƒï¼(o^ ^o)",
    "è®²è®²é‡åˆ°ä»€ä¹ˆè¶£äº‹å§ï¼(>Ï‰<)"
  ],
  "ä¼¤å¿ƒ":[
    "æŠ±æŠ±ï½æ…¢æ…¢è°ƒæ•´æƒ…ç»ªã€‚(>_<)",
    "ç»™ä½ å°åšæœï¼Œå¸¦æ¥æ¸©æš–ã€‚(o^ ^o)",
    "å“­ä¹Ÿæ²¡äº‹ï¼Œè¿˜æœ‰é¼ åœ¨å‘¢ã€‚(ï½¡â€¢Ï‰â€¢ï½¡)"
  ],
  "æ„¤æ€’":[
    "å±å±ï¼å‘æ³„ä¸€ä¸‹å§ï¼Œæ·±å‘¼å¸ï½(à¸‡ â€¢Ì€_â€¢Ì)à¸‡",
    "æˆ‘é™ªä½ è·‘æ»šè½®è§£å‹ï¼(>Ï‰<)",
    "è°æƒ¹ä½ ç”Ÿæ°”ï¼Ÿé¼ ä¹Ÿä¸€èµ·ç”Ÿæ°”ï¼(ï½€Ğ”Â´*)"
  ],
  "å¹³é™":[
    "ä½ çš„å¹³é™æ„ŸæŸ“äº†é¼ ã€‚(o^ ^o)",
    "æœ‰ä½ ç›¸ä¼´ï¼Œé¼ å¾ˆå®‰å¿ƒã€‚(ï½¡â€¢Ï‰â€¢ï½¡)ï¾‰â™¡",
    "å¸Œæœ›è¿™ä»½å¹³é™ä¼´ä½ æ›´ä¹…ã€‚(â‰§âˆ€â‰¦)"
  ],
  "çƒ¦èº":[
    "æ·±å‘¼å¸ï¼Œæˆ‘å¸®ä½ æ•°æ•°ã€‚(><)",
    "ä¸€ç‚¹ç‚¹æ¥ï¼Œä¼šå¥½èµ·æ¥çš„ï¼(o^ ^o)",
    "æ‰æ‰é¼ çš„è‚šå­ï¼Œä¼šå¥½ç‚¹å—ï¼Ÿ(ï½¡â€¢Ï‰â€¢ï½¡)"
  ]
};

// æ·»åŠ ä»»åŠ¡
addTaskBtn.addEventListener('click', ()=>{
  const text = taskInput.value.trim();
  const timeRemark = taskTimer.value.trim();

  if(!text){
    alert("å§å§ï½è¯·å…ˆè¾“å…¥ä»»åŠ¡å“¦ï¼(><)");
    return;
  }

  tasks.push({text, completed:false, time:timeRemark});
  renderTasks();
  showMouseMessage(randomFromArray(addTaskResponses));
  taskInput.value = '';
  taskTimer.value = '';

  currentTaskIndex = tasks.length - 1;
  showModal(timeRemark);
});

function showModal(timeRemark){
  expectedTimeTxt.innerText = timeRemark ? `é¢„è®¡å®Œæˆæ—¶é—´ï¼š${timeRemark}\nè¯·é€‰æ‹©ä½ çš„æ“ä½œ:` : "è¯·é€‰æ‹©ä½ çš„æ“ä½œï¼š";
  modalOverlay.classList.remove('hidden');
}

// å®Œæˆ
taskCompleteBtn.addEventListener('click', ()=>{
  modalOverlay.classList.add('hidden');
  completeTask(currentTaskIndex);
});

// æ”¾å¼ƒ
taskGiveUpBtn.addEventListener('click', ()=>{
  modalOverlay.classList.add('hidden');
  giveUpTask(currentTaskIndex);
});

// è¶…æ—¶
closeModalBtn.addEventListener('click', ()=>{
  modalOverlay.classList.add('hidden');
  handleTimeout(currentTaskIndex);
});

function completeTask(index){
  if(index>=0 && index<tasks.length){
    tasks[index].completed = true;
    renderTasks();
    showMouseMessage(randomFromArray(completeTaskResponses));
  }
}

function giveUpTask(index){
  showMouseMessage(randomFromArray(giveUpTaskResponses));
}

function handleTimeout(index){
  showMouseMessage(randomFromArray(failedTaskResponses));
}

function renderTasks(){
  taskList.innerHTML = '';
  tasks.forEach((t, i)=>{
    const li = document.createElement('li');
    li.className = t.completed?'completed':'';
    li.innerHTML = `
      <span>${t.text}${t.time?`(é¢„è®¡:${t.time})`:''}</span>
      <input type="checkbox" ${t.completed?'checked':''}/>
    `;
    li.querySelector('input').addEventListener('click',()=>{
      tasks[i].completed = !tasks[i].completed;
      if(tasks[i].completed){
        showMouseMessage(randomFromArray(completeTaskResponses));
      }
      renderTasks();
    });
    taskList.appendChild(li);
  });
}

// é¼ é¼ åŒºåŸŸç‚¹å‡»
document.getElementById('mouseArea').addEventListener('click', ()=>{
  showMouseMessage(randomFromArray(clickMouseResponses));
});

// æ˜¾ç¤ºé¼ é¼ è¯è¯­
function showMouseMessage(msg){
  mouseMessage.innerText = msg;
}

// æ™šå®‰æ€»ç»“
summaryBtn.addEventListener('click', ()=>{
  let completedCount = tasks.filter(t=>t.completed).length;
  let notCompletedCount = tasks.length - completedCount;
  if(tasks.length === 0){
    summaryMessage.innerText = "ä»Šå¤©æ²¡æœ‰è®°å½•ä»»åŠ¡å“¦ï½(><)";
    return;
  }
  let responsePool = completedCount > notCompletedCount ? summaryGoodResponses : summaryBadResponses;
  summaryMessage.innerText = randomFromArray(responsePool);

  // éšæœºç¤¼ç‰©
  const gift = randomFromArray(possibleGifts);
  gifts.push(gift);
  refreshGiftBag();
});

function refreshGiftBag(){
  giftList.innerHTML = '';
  if(gifts.length===0){
    noGiftMsg.style.display='block';
  }else{
    noGiftMsg.style.display='none';
    gifts.forEach(g=>{
      let li = document.createElement('li');
      li.innerText = g;
      giftList.appendChild(li);
    });
  }
}

// å€¾è¯‰å¿ƒäº‹
submitMoodBtn.addEventListener('click', ()=>{
  const text = moodInput.value.trim();
  const mood = moodSelect.value;
  if(!text){
    alert("å§å§ï½å…ˆè¯´ç‚¹ä»€ä¹ˆå§ğŸ˜Š");
    return;
  }
  const res = randomFromArray(moodResponsesObj[mood]);
  moodResponse.style.display = 'block';
  moodResponse.innerText = res;
  moodInput.value = '';
});

function randomFromArray(arr){
  return arr[Math.floor(Math.random()*arr.length)];
}

// åˆå§‹åŒ–
showPage(mainPage);
refreshGiftBag();
modalOverlay.classList.add('hidden');
</script>
</body>
</html>